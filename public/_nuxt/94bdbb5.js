(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{672:function(t,e,n){"use strict";n.r(e);n(33);var o={name:"Index",components:{Product:n(545).a},data:function(){return{toggle_none:1,page:1,valid:!0,pages:null,bidDialog:!1,increase:null,min_increment:null,grid:!0,products:[],product:{},productId:null,message:{activate:!1,message:"",color:null}}},mounted:function(){this.getProducts()},methods:{openBidDialog:function(t){this.productId=t.id,this.increase=t.min_increment,this.min_increment=t.min_increment,this.bidDialog=!0},bid:function(){var t=this,e=this.productId,o=this.increase;this.$apollo.mutate({mutation:n(496),variables:{product_id:e,increase:o}}).then((function(e){e.data.BidIncrease&&(t.message={activate:!0,text:"your bid submitted",color:"success"},t.bidDialog=!1)}))},getProducts:function(){var t=this,e=this.page;this.$apollo.query({query:n(540),variables:{page:e}}).then((function(e){t.products=e.data.products.data,t.pages=e.data.products.paginatorInfo.lastPage}))},sortByPrice:function(t){var e=this.products.slice(0);e.sort((function(a,b){return"lower"===t?a.price-b.price:b.price-a.price})),this.products=e}}},r=n(69),c=n(79),l=n.n(c),d=n(220),v=n(654),m=n(198),_=n(68),h=n(459),f=n(460),x=n(509),$=n(487),k=n(199),V=n(494),w=n(554),C=n(464),I=n(576),y=n(456),D=n(470),P=n(74),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("v-snackbar",{attrs:{color:t.message.color},model:{value:t.message.activate,callback:function(e){t.$set(t.message,"activate",e)},expression:"message.activate"}},[t._v("\n    "+t._s(t.message.text)+"\n    "),n("v-btn",{attrs:{color:"white",icon:""},on:{click:function(e){t.message.activate=!1}}},[n("v-icon",[t._v("mdi-close")])],1)],1),t._v(" "),n("v-container",[n("v-toolbar",{staticClass:"mt-5",attrs:{color:"transparent",dense:"",elevation:"0",floating:""}},[n("v-spacer"),t._v(" "),n("v-btn-toggle",{staticClass:"ma-2"},[n("v-btn",{attrs:{small:""},on:{click:function(e){return t.sortByPrice("higher")}}},[n("v-icon",[t._v("mdi-menu-up")])],1),t._v(" "),n("v-btn",{attrs:{small:""},on:{click:function(e){return t.sortByPrice("lower")}}},[n("v-icon",[t._v("mdi-menu-down")])],1)],1)],1),t._v(" "),n("v-row",{staticClass:"mt-6"},t._l(t.products,(function(e){return n("v-col",{attrs:{md:"3",sm:"6",cols:"12"}},[n("product",{attrs:{grid:t.grid,product:e}},[n("v-layout",{staticClass:"mt-2"},[n("v-spacer"),t._v(" "),t.$auth.loggedIn&&t.$auth.user.verified&&t.$auth.user.id!=e.user.id?n("v-btn",{attrs:{color:"red",dark:""},on:{click:function(n){return t.openBidDialog(e)}}},[t._v(t._s(t.$t("bid")))]):t._e(),t._v(" "),t.$auth.loggedIn&&!t.$auth.user.verified?n("v-btn",{attrs:{color:"red",nuxt:"",to:"/setting/profile",dark:""}},[t._v(t._s(t.$t("bid")))]):t._e(),t._v(" "),t.$auth.loggedIn?t._e():n("v-btn",{attrs:{color:"red",nuxt:"",to:"/auth/login",dark:""}},[t._v(t._s(t.$t("bid")))]),t._v(" "),n("v-spacer")],1)],1)],1)})),1),t._v(" "),t.pages>1?n("v-pagination",{attrs:{length:t.pages},on:{input:t.getProducts},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}):t._e()],1),t._v(" "),t.$auth.loggedIn&&t.$auth.user.verified?n("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.bidDialog,callback:function(e){t.bidDialog=e},expression:"bidDialog"}},[n("v-card",[n("v-card-title",[t._v("\n        "+t._s(t.$t("bid"))+"\n      ")]),t._v(" "),n("v-card-text",[n("v-form",{model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-text-field",{attrs:{min:t.min_increment,rules:[function(e){return!!e||t.$t("validation.required")},function(){return t.increase>=t.min_increment||"zid chwi"}],type:"number"},model:{value:t.increase,callback:function(e){t.increase=e},expression:"increase"}})],1)],1),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"red",text:""},on:{click:function(e){t.bidDialog=!1}}},[t._v("\n          "+t._s(t.$t("close"))+"\n        ")]),t._v(" "),n("v-btn",{staticClass:"white--text",attrs:{disabled:!t.valid,color:"cyan"},on:{click:t.bid}},[t._v(t._s(t.$t("continue")))])],1)],1)],1):t._e()],1)}),[],!1,null,"3da70a70",null);e.default=component.exports;l()(component,{VBtn:d.a,VBtnToggle:v.a,VCard:m.a,VCardActions:_.a,VCardText:_.b,VCardTitle:_.c,VCol:h.a,VContainer:f.a,VDialog:x.a,VForm:$.a,VIcon:k.a,VLayout:V.a,VPagination:w.a,VRow:C.a,VSnackbar:I.a,VSpacer:y.a,VTextField:D.a,VToolbar:P.a})}}]);